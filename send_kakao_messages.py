import requests
import json
import schedule
import time
import os

# 카카오톡 API 설정
ACCESS_TOKEN = 'kgoR8ulyzktuqi8jIuXelOv1se3ZCAvNAAAAAQoqJVMAAAGQ_FvMisYNwJ_muSR4'
KAKAO_UPLOAD_URL = 'https://kapi.kakao.com/v2/api/talk/message/image/upload'
TEMPLATE_ID = '110559'  # 템플릿 ID
KAKAO_SEND_MESSAGE_URL = 'https://kapi.kakao.com/v2/api/talk/memo/send'

headers = {
    'Authorization': f'Bearer {ACCESS_TOKEN}',
    'Content-Type': 'application/x-www-form-urlencoded'
}

# 보내야 할 메시지 리스트
messages = [
     """[시139:1-18]
1 여호와여 주께서 나를 살펴 보셨으므로 나를 아시나이다
2 주께서 내가 앉고 일어섬을 아시고 멀리서도 나의 생각을 밝히 아시오며
3 나의 모든 길과 내가 눕는 것을 살펴 보셨으므로 나의 모든 행위를 익히 아시오니
4 여호와여 내 혀의 말을 알지 못하시는 것이 하나도 없으시니이다
5 주께서 나의 앞뒤를 둘러싸시고 내게 안수하셨나이다
6 이 지식이 내게 너무 기이하니 높아서 내가 능히 미치지 못하나이다
7 내가 주의 영을 떠나 어디로 가며 주의 앞에서 어디로 피하리이까
8 내가 하늘에 올라갈지라도 거기 계시며 스올에 내 자리를 펼지라도 거기 계시니이다
9 내가 새벽 날개를 치며 바다 끝에 가서 거주할지라도
10 거기서도 주의 손이 나를 인도하시며 주의 오른손이 나를 붙드시리이다
11 내가 혹시 말하기를 흑암이 반드시 나를 덮고 나를 두른 빛은 밤이 되리라 할지라도
12 주에게서는 흑암이 숨기지 못하며 밤이 낮과 같이 비추이나니 주에게는 흑암과 빛이 같음이니이다
13 주께서 내 내장을 지으시며 나의 모태에서 나를 만드셨나이다
14 내가 주께 감사하옴은 나를 지으심이 심히 기묘하심이라 주께서 하시는 일이 기이함을 내 영혼이 잘 아나이다
15 내가 은밀한 데서 지음을 받고 땅의 깊은 곳에서 기이하게 지음을 받은 때에 나의 형체가 주의 앞에 숨겨지지 못하였나이다
16 내 형질이 이루어지기 전에 주의 눈이 보셨으며 나를 위하여 정한 날이 하루도 되기 전에 주의 책에 다 기록이 되었나이다
17 하나님이여 주의 생각이 내게 어찌 그리 보배로우신지요 그 수가 어찌 그리 많은지요
18 내가 세려고 할지라도 그 수가 모래보다 많도소이다 내가 깰 때에도 여전히 주와 함께 있나이다

[마28:20] 내가 너희에게 분부한 모든 것을 가르쳐 지키게 하라 볼지어다 내가 세상 끝날까지 너희와 항상 함께 있으리라 하시니라

[엡2:10] 우리는 그가 만드신 바라 그리스도 예수 안에서 선한 일을 위하여 지으심을 받은 자니 이 일은 하나님이 전에 예비하사 우리로 그 가운데서 행하게 하려 하심이니라""", 

"""[시103:8-14]
8 여호와는 긍휼이 많으시고 은혜로우시며 노하기를 더디 하시고 인자하심이 풍부하시도다
9 자주 경책하지 아니하시며 노를 영원히 품지 아니하시리로다
10 우리의 죄를 따라 우리를 처벌하지는 아니하시며 우리의 죄악을 따라 우리에게 그대로 갚지는 아니하셨으니
11 이는 하늘이 땅에서 높음 같이 그를 경외하는 자에게 그의 인자하심이 크심이로다
12 동이 서에서 먼 것 같이 우리의 죄과를 우리에게서 멀리 옮기셨으며
13 아버지가 자식을 긍휼히 여김 같이 여호와께서는 자기를 경외하는 자를 긍휼히 여기시나니
14 이는 그가 우리의 체질을 아시며 우리가 단지 먼지뿐임을 기억하심이로다

[요일3:1-3]
1 보라 아버지께서 어떠한 사랑을 우리에게 베푸사 하나님의 자녀라 일컬음을 받게 하셨는가, 우리가 그러하도다 그러므로 세상이 우리를 알지 못함은 그를 알지 못함이라
2 사랑하는 자들아 우리가 지금은 하나님의 자녀라 장래에 어떻게 될지는 아직 나타나지 아니하였으나 그가 나타나시면 우리가 그와 같을 줄을 아는 것은 그의 참모습 그대로 볼 것이기 때문이니
3 주를 향하여 이 소망을 가진 자마다 그의 깨끗하심과 같이 자기를 깨끗하게 하느니라

[히4:12-13]
12 하나님의 말씀은 살아 있고 활력이 있어 좌우에 날선 어떤 검보다도 예리하여 혼과 영과 및 관절과 골수를 찔러 쪼개기까지 하며 또 마음의 생각과 뜻을 판단하나니
13 지으신 것이 하나도 그 앞에 나타나지 않음이 없고 우리의 결산을 받으실 이의 눈 앞에 만물이 벌거벗은 것 같이 드러나느니라""", 

"""[롬5:8-11]
8 우리가 아직 죄인 되었을 때에 그리스도께서 우리를 위하여 죽으심으로 하나님께서 우리에 대한 자기의 사랑을 확증하셨느니라
9 그러면 이제 우리가 그의 피로 말미암아 의롭다 하심을 받았으니 더욱 그로 말미암아 진노하심에서 구원을 받을 것이니
10 곧 우리가 원수 되었을 때에 그의 아들의 죽으심으로 말미암아 하나님과 화목하게 되었은즉 화목하게 된 자로서는 더욱 그의 살아나심으로 말미암아 구원을 받을 것이니라
11 그뿐 아니라 이제 우리로 화목하게 하신 우리 주 예수 그리스도로 말미암아 하나님 안에서 또한 즐거워하느니라

[습3:17] 너의 하나님 여호와가 너의 가운데에 계시니 그는 구원을 베푸실 전능자이시라 그가 너로 말미암아 기쁨을 이기지 못하시며 너를 잠잠히 사랑하시며 너로 말미암아 즐거이 부르며 기뻐하시리라 하리라""", 

"""[사40:11] 그는 목자 같이 양 떼를 먹이시며 어린 양을 그 팔로 모아 품에 안으시며 젖먹이는 암컷들을 온순히 인도하시리로다

[호11:3-12]
3 그러나 내가 에브라임에게 걸음을 가르치고 내 팔로 안았음에도 내가 그들을 고치는 줄을 그들은 알지 못하였도다
4 내가 사람의 줄 곧 사랑의 줄로 그들을 이끌었고 그들에게 대하여 그 목에서 멍에를 벗기는 자 같이 되었으며 그들 앞에 먹을 것을 두었노라
5 그들은 애굽 땅으로 되돌아 가지 못하겠거늘 내게 돌아 오기를 싫어하니 앗수르 사람이 그 임금이 될 것이라
6 칼이 그들의 성읍들을 치며 빗장을 깨뜨려 없이하리니 이는 그들의 계책으로 말미암음이니라
7 내 백성이 끝끝내 내게서 물러가나니 비록 그들을 불러 위에 계신 이에게로 돌아오라 할지라도 일어나는 자가 하나도 없도다
8 에브라임이여 내가 어찌 너를 놓겠느냐 이스라엘이여 내가 어찌 너를 버리겠느냐 내가 어찌 너를 아드마 같이 놓겠느냐 어찌 너를 스보임 같이 두겠느냐 내 마음이 내 속에서 돌이키어 나의 긍휼이 온전히 불붙듯 하도다
9 내가 나의 맹렬한 진노를 나타내지 아니하며 내가 다시는 에브라임을 멸하지 아니하리니 이는 내가 하나님이요 사람이 아님이라 네 가운데 있는 거룩한 이니 진노함으로 네게 임하지 아니하리라
10 그들은 사자처럼 소리를 내시는 여호와를 따를 것이라 여호와께서 소리를 내시면 자손들이 서쪽에서부터 떨며 오되
11 그들은 애굽에서부터 새 같이, 앗수르에서부터 비둘기 같이 떨며 오리니 내가 그들을 그들의 집에 머물게 하리라 나 여호와의 말이니라
12 에브라임은 거짓으로, 이스라엘 족속은 속임수로 나를 에워쌌고 유다는 하나님 곧 신실하시고 거룩하신 자에게 대하여 정함이 없도다
""", 

"""[빌1:6] 너희 안에서 착한 일을 시작하신 이가 그리스도 예수의 날까지 이루실 줄을 우리는 확신하노라

[히13:5] 돈을 사랑하지 말고 있는 바를 족한 줄로 알라 그가 친히 말씀하시기를 내가 결코 너희를 버리지 아니하고 너희를 떠나지 아니하리라 하셨느니라""", 

"""[출34:6] 여호와께서 그의 앞으로 지나시며 선포하시되 여호와라 여호와라 자비롭고 은혜롭고 노하기를 더디하고 인자와 진실이 많은 하나님이라

[롬2:4] 혹 네가 하나님의 인자하심이 너를 인도하여 회개하게 하심을 알지 못하여 그의 인자하심과 용납하심과 길이 참으심이 풍성함을 멸시하느냐

[히12:5-11]
5 또 아들들에게 권하는 것 같이 너희에게 권면하신 말씀도 잊었도다 일렀으되 내 아들아 주의 징계하심을 경히 여기지 말며 그에게 꾸지람을 받을 때에 낙심하지 말라
6 주께서 그 사랑하시는 자를 징계하시고 그가 받아들이시는 아들마다 채찍질하심이라 하였으니
7 너희가 참음은 징계를 받기 위함이라 하나님이 아들과 같이 너희를 대우하시나니 어찌 아버지가 징계하지 않는 아들이 있으리요
8 징계는 다 받는 것이거늘 너희에게 없으면 사생자요 친아들이 아니니라
9 또 우리 육신의 아버지가 우리를 징계하여도 공경하였거든 하물며 모든 영의 아버지께 더욱 복종하며 살려 하지 않겠느냐
10 그들은 잠시 자기의 뜻대로 우리를 징계하였거니와 오직 하나님은 우리의 유익을 위하여 그의 거룩하심에 참여하게 하시느니라
11 무릇 징계가 당시에는 즐거워 보이지 않고 슬퍼 보이나 후에 그로 말미암아 연단 받은 자들은 의와 평강의 열매를 맺느니라""", 

"""[시18:2] 여호와는 나의 반석이시요 나의 요새시요 나를 건지시는 이시요 나의 하나님이시요 내가 그 안에 피할 나의 바위시요 나의 방패시요 나의 구원의 뿔이시요 나의 산성이시로다

[마11:28-30]
28 수고하고 무거운 짐 진 자들아 다 내게로 오라 내가 너희를 쉬게 하리라
29 나는 마음이 온유하고 겸손하니 나의 멍에를 메고 내게 배우라 그리하면 너희 마음이 쉼을 얻으리니
30 이는 내 멍에는 쉽고 내 짐은 가벼움이라 하시니라

[엡6:10-18]
10 끝으로 너희가 주 안에서와 그 힘의 능력으로 강건하여지고
11 마귀의 간계를 능히 대적하기 위하여 하나님의 전신 갑주를 입으라
12 우리의 씨름은 혈과 육을 상대하는 것이 아니요 통치자들과 권세들과 이 어둠의 세상 주관자들과 하늘에 있는 악의 영들을 상대함이라
13 그러므로 하나님의 전신 갑주를 취하라 이는 악한 날에 너희가 능히 대적하고 모든 일을 행한 후에 서기 위함이라
14 그런즉 서서 진리로 너희 허리 띠를 띠고 의의 호심경을 붙이고
15 평안의 복음이 준비한 것으로 신을 신고
16 모든 것 위에 믿음의 방패를 가지고 이로써 능히 악한 자의 모든 불화살을 소멸하고
17 구원의 투구와 성령의 검 곧 하나님의 말씀을 가지라
18 모든 기도와 간구를 하되 항상 성령 안에서 기도하고 이를 위하여 깨어 구하기를 항상 힘쓰며 여러 성도를 위하여 구하라""", 

"""[애3:22] 여호와의 인자와 긍휼이 무궁하시므로 우리가 진멸되지 아니함이니이다

[갈5:22-24]
22 오직 성령의 열매는 사랑과 희락과 화평과 오래 참음과 자비와 양선과 충성과
23 온유와 절제니 이같은 것을 금지할 법이 없느니라
24 그리스도 예수의 사람들은 육체와 함께 그 정욕과 탐심을 십자가에 못 박았느니라""", 

"""[갈5:1] 그리스도께서 우리를 자유롭게 하려고 자유를 주셨으니 그러므로 굳건하게 서서 다시는 종의 멍에를 메지 말라

[히4:15-16]
15 우리에게 있는 대제사장은 우리의 연약함을 동정하지 못하실 이가 아니요 모든 일에 우리와 똑같이 시험을 받으신 이로되 죄는 없으시니라
16 그러므로 우리는 긍휼하심을 받고 때를 따라 돕는 은혜를 얻기 위하여 은혜의 보좌 앞에 담대히 나아갈 것이니라""", 

"""[렘31:13-34]
13 그 때에 처녀는 춤추며 즐거워하겠고 청년과 노인은 함께 즐거워하리니 내가 그들의 슬픔을 돌려서 즐겁게 하며 그들을 위로하여 그들의 근심으로부터 기쁨을 얻게 할 것임이라
14 내가 기름으로 제사장들의 마음을 흡족하게 하며 내 복으로 내 백성을 만족하게 하리라 여호와의 말씀이니라
15 여호와께서 이와 같이 말씀하시니라 라마에서 슬퍼하며 통곡하는 소리가 들리니 라헬이 그 자식 때문에 애곡하는 것이라 그가 자식이 없어져서 위로 받기를 거절하는도다
16 여호와께서 이와 같이 말씀하시니라 네 울음 소리와 네 눈물을 멈추어라 네 일에 삯을 받을 것인즉 그들이 그의 대적의 땅에서 돌아오리라 여호와의 말씀이니라
17 너의 장래에 소망이 있을 것이라 너의 자녀가 자기들의 지경으로 돌아오리라 여호와의 말씀이니라
18 에브라임이 스스로 탄식함을 내가 분명히 들었노니 주께서 나를 징벌하시매 멍에에 익숙하지 못한 송아지 같은 내가 징벌을 받았나이다 주는 나의 하나님 여호와이시니 나를 이끌어 돌이키소서 그리하시면 내가 돌아오겠나이다
19 내가 돌이킨 후에 뉘우쳤고 내가 교훈을 받은 후에 내 볼기를 쳤사오니 이는 어렸을 때의 치욕을 지므로 부끄럽고 욕됨이니이다 하도다
20 에브라임은 나의 사랑하는 아들 기뻐하는 자식이 아니냐 내가 그를 책망하여 말할 때마다 깊이 생각하노라 그러므로 그를 위하여 내 창자가 들끓으니 내가 반드시 그를 불쌍히 여기리라 여호와의 말씀이니라
21 처녀 이스라엘아 너의 이정표를 세우며 너의 푯말을 만들고 큰 길 곧 네가 전에 가던 길을 마음에 두라 돌아오라 네 성읍들로 돌아오라
22 반역한 딸아 네가 어느 때까지 방황하겠느냐 여호와가 새 일을 세상에 창조하였나니 곧 여자가 남자를 둘러 싸리라
23 만군의 여호와 이스라엘의 하나님께서 이와 같이 말씀하시니라 내가 그 사로잡힌 자를 돌아오게 할 때에 그들이 유다 땅과 그 성읍들에서 다시 이 말을 쓰리니 곧 의로운 처소여, 거룩한 산이여, 여호와께서 네게 복 주시기를 원하노라 할 것이며
24 유다와 그 모든 성읍의 농부와 양 떼를 인도하는 자가 거기에 함께 살리니
25 이는 내가 그 피곤한 심령을 상쾌하게 하며 모든 연약한 심령을 만족하게 하였음이라 하시기로
26 내가 깨어 보니 내 잠이 달았더라
27 여호와의 말씀이니라 보라 내가 사람의 씨와 짐승의 씨를 이스라엘 집과 유다 집에 뿌릴 날이 이르리니
28 깨어서 그들을 뿌리 뽑으며 무너뜨리며 전복하며 멸망시키며 괴롭게 하던 것과 같이 내가 깨어서 그들을 세우며 심으리라 여호와의 말씀이니라
29 그 때에 그들이 말하기를 다시는 아버지가 신 포도를 먹었으므로 아들들의 이가 시다 하지 아니하겠고
30 신 포도를 먹는 자마다 그의 이가 신 것 같이 누구나 자기의 죄악으로 말미암아 죽으리라
31 여호와의 말씀이니라 보라 날이 이르리니 내가 이스라엘 집과 유다 집에 새 언약을 맺으리라
32 이 언약은 내가 그들의 조상들의 손을 잡고 애굽 땅에서 인도하여 내던 날에 맺은 것과 같지 아니할 것은 내가 그들의 남편이 되었어도 그들이 내 언약을 깨뜨렸음이라 여호와의 말씀이니라
33 그러나 그 날 후에 내가 이스라엘 집과 맺을 언약은 이러하니 곧 내가 나의 법을 그들의 속에 두며 그들의 마음에 기록하여 나는 그들의 하나님이 되고 그들은 내 백성이 될 것이라 여호와의 말씀이니라
34 그들이 다시는 각기 이웃과 형제를 가르쳐 이르기를 너는 여호와를 알라 하지 아니하리니 이는 작은 자로부터 큰 자까지 다 나를 알기 때문이라 내가 그들의 악행을 사하고 다시는 그 죄를 기억하지 아니하리라 여호와의 말씀이니라

[롬8:1] 그러므로 이제 그리스도 예수 안에 있는 자에게는 결코 정죄함이 없나니""", 

"""[잠24:16] 대저 의인은 일곱 번 넘어질지라도 다시 일어나려니와 악인은 재앙으로 말미암아 엎드러지느니라

[요일1:7-10]
7 그가 빛 가운데 계신 것 같이 우리도 빛 가운데 행하면 우리가 서로 사귐이 있고 그 아들 예수의 피가 우리를 모든 죄에서 깨끗하게 하실 것이요
8 만일 우리가 죄가 없다고 말하면 스스로 속이고 또 진리가 우리 속에 있지 아니할 것이요
9 만일 우리가 우리 죄를 자백하면 그는 미쁘시고 의로우사 우리 죄를 사하시며 우리를 모든 불의에서 깨끗하게 하실 것이요
10 만일 우리가 범죄하지 아니하였다 하면 하나님을 거짓말하는 이로 만드는 것이니 또한 그의 말씀이 우리 속에 있지 아니하니라

[요일2:1-2]
1 나의 자녀들아 내가 이것을 너희에게 씀은 너희로 죄를 범하지 않게 하려 함이라 만일 누가 죄를 범하여도 아버지 앞에서 우리에게 대언자가 있으니 곧 의로우신 예수 그리스도시라
2 그는 우리 죄를 위한 화목제물이니 우리만 위할 뿐 아니요 온 세상의 죄를 위하심이라"""
]

full_texts = [
     """[시139:1-18]
1 여호와여 주께서 나를 살펴 보셨으므로 나를 아시나이다
2 주께서 내가 앉고 일어섬을 아시고 멀리서도 나의 생각을 밝히 아시오며
3 나의 모든 길과 내가 눕는 것을 살펴 보셨으므로 나의 모든 행위를 익히 아시오니
4 여호와여 내 혀의 말을 알지 못하시는 것이 하나도 없으시니이다
5 주께서 나의 앞뒤를 둘러싸시고 내게 안수하셨나이다
6 이 지식이 내게 너무 기이하니 높아서 내가 능히 미치지 못하나이다
7 내가 주의 영을 떠나 어디로 가며 주의 앞에서 어디로 피하리이까
8 내가 하늘에 올라갈지라도 거기 계시며 스올에 내 자리를 펼지라도 거기 계시니이다
9 내가 새벽 날개를 치며 바다 끝에 가서 거주할지라도
10 거기서도 주의 손이 나를 인도하시며 주의 오른손이 나를 붙드시리이다
11 내가 혹시 말하기를 흑암이 반드시 나를 덮고 나를 두른 빛은 밤이 되리라 할지라도
12 주에게서는 흑암이 숨기지 못하며 밤이 낮과 같이 비추이나니 주에게는 흑암과 빛이 같음이니이다
13 주께서 내 내장을 지으시며 나의 모태에서 나를 만드셨나이다
14 내가 주께 감사하옴은 나를 지으심이 심히 기묘하심이라 주께서 하시는 일이 기이함을 내 영혼이 잘 아나이다
15 내가 은밀한 데서 지음을 받고 땅의 깊은 곳에서 기이하게 지음을 받은 때에 나의 형체가 주의 앞에 숨겨지지 못하였나이다
16 내 형질이 이루어지기 전에 주의 눈이 보셨으며 나를 위하여 정한 날이 하루도 되기 전에 주의 책에 다 기록이 되었나이다
17 하나님이여 주의 생각이 내게 어찌 그리 보배로우신지요 그 수가 어찌 그리 많은지요
18 내가 세려고 할지라도 그 수가 모래보다 많도소이다 내가 깰 때에도 여전히 주와 함께 있나이다

[마28:20] 내가 너희에게 분부한 모든 것을 가르쳐 지키게 하라 볼지어다 내가 세상 끝날까지 너희와 항상 함께 있으리라 하시니라

[엡2:10] 우리는 그가 만드신 바라 그리스도 예수 안에서 선한 일을 위하여 지으심을 받은 자니 이 일은 하나님이 전에 예비하사 우리로 그 가운데서 행하게 하려 하심이니라""", 

"""[시103:8-14]
8 여호와는 긍휼이 많으시고 은혜로우시며 노하기를 더디 하시고 인자하심이 풍부하시도다
9 자주 경책하지 아니하시며 노를 영원히 품지 아니하시리로다
10 우리의 죄를 따라 우리를 처벌하지는 아니하시며 우리의 죄악을 따라 우리에게 그대로 갚지는 아니하셨으니
11 이는 하늘이 땅에서 높음 같이 그를 경외하는 자에게 그의 인자하심이 크심이로다
12 동이 서에서 먼 것 같이 우리의 죄과를 우리에게서 멀리 옮기셨으며
13 아버지가 자식을 긍휼히 여김 같이 여호와께서는 자기를 경외하는 자를 긍휼히 여기시나니
14 이는 그가 우리의 체질을 아시며 우리가 단지 먼지뿐임을 기억하심이로다

[요일3:1-3]
1 보라 아버지께서 어떠한 사랑을 우리에게 베푸사 하나님의 자녀라 일컬음을 받게 하셨는가, 우리가 그러하도다 그러므로 세상이 우리를 알지 못함은 그를 알지 못함이라
2 사랑하는 자들아 우리가 지금은 하나님의 자녀라 장래에 어떻게 될지는 아직 나타나지 아니하였으나 그가 나타나시면 우리가 그와 같을 줄을 아는 것은 그의 참모습 그대로 볼 것이기 때문이니
3 주를 향하여 이 소망을 가진 자마다 그의 깨끗하심과 같이 자기를 깨끗하게 하느니라

[히4:12-13]
12 하나님의 말씀은 살아 있고 활력이 있어 좌우에 날선 어떤 검보다도 예리하여 혼과 영과 및 관절과 골수를 찔러 쪼개기까지 하며 또 마음의 생각과 뜻을 판단하나니
13 지으신 것이 하나도 그 앞에 나타나지 않음이 없고 우리의 결산을 받으실 이의 눈 앞에 만물이 벌거벗은 것 같이 드러나느니라""", 

"""[롬5:8-11]
8 우리가 아직 죄인 되었을 때에 그리스도께서 우리를 위하여 죽으심으로 하나님께서 우리에 대한 자기의 사랑을 확증하셨느니라
9 그러면 이제 우리가 그의 피로 말미암아 의롭다 하심을 받았으니 더욱 그로 말미암아 진노하심에서 구원을 받을 것이니
10 곧 우리가 원수 되었을 때에 그의 아들의 죽으심으로 말미암아 하나님과 화목하게 되었은즉 화목하게 된 자로서는 더욱 그의 살아나심으로 말미암아 구원을 받을 것이니라
11 그뿐 아니라 이제 우리로 화목하게 하신 우리 주 예수 그리스도로 말미암아 하나님 안에서 또한 즐거워하느니라

[습3:17] 너의 하나님 여호와가 너의 가운데에 계시니 그는 구원을 베푸실 전능자이시라 그가 너로 말미암아 기쁨을 이기지 못하시며 너를 잠잠히 사랑하시며 너로 말미암아 즐거이 부르며 기뻐하시리라 하리라""", 

"""[사40:11] 그는 목자 같이 양 떼를 먹이시며 어린 양을 그 팔로 모아 품에 안으시며 젖먹이는 암컷들을 온순히 인도하시리로다

[호11:3-12]
3 그러나 내가 에브라임에게 걸음을 가르치고 내 팔로 안았음에도 내가 그들을 고치는 줄을 그들은 알지 못하였도다
4 내가 사람의 줄 곧 사랑의 줄로 그들을 이끌었고 그들에게 대하여 그 목에서 멍에를 벗기는 자 같이 되었으며 그들 앞에 먹을 것을 두었노라
5 그들은 애굽 땅으로 되돌아 가지 못하겠거늘 내게 돌아 오기를 싫어하니 앗수르 사람이 그 임금이 될 것이라
6 칼이 그들의 성읍들을 치며 빗장을 깨뜨려 없이하리니 이는 그들의 계책으로 말미암음이니라
7 내 백성이 끝끝내 내게서 물러가나니 비록 그들을 불러 위에 계신 이에게로 돌아오라 할지라도 일어나는 자가 하나도 없도다
8 에브라임이여 내가 어찌 너를 놓겠느냐 이스라엘이여 내가 어찌 너를 버리겠느냐 내가 어찌 너를 아드마 같이 놓겠느냐 어찌 너를 스보임 같이 두겠느냐 내 마음이 내 속에서 돌이키어 나의 긍휼이 온전히 불붙듯 하도다
9 내가 나의 맹렬한 진노를 나타내지 아니하며 내가 다시는 에브라임을 멸하지 아니하리니 이는 내가 하나님이요 사람이 아님이라 네 가운데 있는 거룩한 이니 진노함으로 네게 임하지 아니하리라
10 그들은 사자처럼 소리를 내시는 여호와를 따를 것이라 여호와께서 소리를 내시면 자손들이 서쪽에서부터 떨며 오되
11 그들은 애굽에서부터 새 같이, 앗수르에서부터 비둘기 같이 떨며 오리니 내가 그들을 그들의 집에 머물게 하리라 나 여호와의 말이니라
12 에브라임은 거짓으로, 이스라엘 족속은 속임수로 나를 에워쌌고 유다는 하나님 곧 신실하시고 거룩하신 자에게 대하여 정함이 없도다
""", 

"""[빌1:6] 너희 안에서 착한 일을 시작하신 이가 그리스도 예수의 날까지 이루실 줄을 우리는 확신하노라

[히13:5] 돈을 사랑하지 말고 있는 바를 족한 줄로 알라 그가 친히 말씀하시기를 내가 결코 너희를 버리지 아니하고 너희를 떠나지 아니하리라 하셨느니라""", 

"""[출34:6] 여호와께서 그의 앞으로 지나시며 선포하시되 여호와라 여호와라 자비롭고 은혜롭고 노하기를 더디하고 인자와 진실이 많은 하나님이라

[롬2:4] 혹 네가 하나님의 인자하심이 너를 인도하여 회개하게 하심을 알지 못하여 그의 인자하심과 용납하심과 길이 참으심이 풍성함을 멸시하느냐

[히12:5-11]
5 또 아들들에게 권하는 것 같이 너희에게 권면하신 말씀도 잊었도다 일렀으되 내 아들아 주의 징계하심을 경히 여기지 말며 그에게 꾸지람을 받을 때에 낙심하지 말라
6 주께서 그 사랑하시는 자를 징계하시고 그가 받아들이시는 아들마다 채찍질하심이라 하였으니
7 너희가 참음은 징계를 받기 위함이라 하나님이 아들과 같이 너희를 대우하시나니 어찌 아버지가 징계하지 않는 아들이 있으리요
8 징계는 다 받는 것이거늘 너희에게 없으면 사생자요 친아들이 아니니라
9 또 우리 육신의 아버지가 우리를 징계하여도 공경하였거든 하물며 모든 영의 아버지께 더욱 복종하며 살려 하지 않겠느냐
10 그들은 잠시 자기의 뜻대로 우리를 징계하였거니와 오직 하나님은 우리의 유익을 위하여 그의 거룩하심에 참여하게 하시느니라
11 무릇 징계가 당시에는 즐거워 보이지 않고 슬퍼 보이나 후에 그로 말미암아 연단 받은 자들은 의와 평강의 열매를 맺느니라""", 

"""[시18:2] 여호와는 나의 반석이시요 나의 요새시요 나를 건지시는 이시요 나의 하나님이시요 내가 그 안에 피할 나의 바위시요 나의 방패시요 나의 구원의 뿔이시요 나의 산성이시로다

[마11:28-30]
28 수고하고 무거운 짐 진 자들아 다 내게로 오라 내가 너희를 쉬게 하리라
29 나는 마음이 온유하고 겸손하니 나의 멍에를 메고 내게 배우라 그리하면 너희 마음이 쉼을 얻으리니
30 이는 내 멍에는 쉽고 내 짐은 가벼움이라 하시니라

[엡6:10-18]
10 끝으로 너희가 주 안에서와 그 힘의 능력으로 강건하여지고
11 마귀의 간계를 능히 대적하기 위하여 하나님의 전신 갑주를 입으라
12 우리의 씨름은 혈과 육을 상대하는 것이 아니요 통치자들과 권세들과 이 어둠의 세상 주관자들과 하늘에 있는 악의 영들을 상대함이라
13 그러므로 하나님의 전신 갑주를 취하라 이는 악한 날에 너희가 능히 대적하고 모든 일을 행한 후에 서기 위함이라
14 그런즉 서서 진리로 너희 허리 띠를 띠고 의의 호심경을 붙이고
15 평안의 복음이 준비한 것으로 신을 신고
16 모든 것 위에 믿음의 방패를 가지고 이로써 능히 악한 자의 모든 불화살을 소멸하고
17 구원의 투구와 성령의 검 곧 하나님의 말씀을 가지라
18 모든 기도와 간구를 하되 항상 성령 안에서 기도하고 이를 위하여 깨어 구하기를 항상 힘쓰며 여러 성도를 위하여 구하라""", 

"""[애3:22] 여호와의 인자와 긍휼이 무궁하시므로 우리가 진멸되지 아니함이니이다

[갈5:22-24]
22 오직 성령의 열매는 사랑과 희락과 화평과 오래 참음과 자비와 양선과 충성과
23 온유와 절제니 이같은 것을 금지할 법이 없느니라
24 그리스도 예수의 사람들은 육체와 함께 그 정욕과 탐심을 십자가에 못 박았느니라""", 

"""[갈5:1] 그리스도께서 우리를 자유롭게 하려고 자유를 주셨으니 그러므로 굳건하게 서서 다시는 종의 멍에를 메지 말라

[히4:15-16]
15 우리에게 있는 대제사장은 우리의 연약함을 동정하지 못하실 이가 아니요 모든 일에 우리와 똑같이 시험을 받으신 이로되 죄는 없으시니라
16 그러므로 우리는 긍휼하심을 받고 때를 따라 돕는 은혜를 얻기 위하여 은혜의 보좌 앞에 담대히 나아갈 것이니라""", 

"""[렘31:13-34]
13 그 때에 처녀는 춤추며 즐거워하겠고 청년과 노인은 함께 즐거워하리니 내가 그들의 슬픔을 돌려서 즐겁게 하며 그들을 위로하여 그들의 근심으로부터 기쁨을 얻게 할 것임이라
14 내가 기름으로 제사장들의 마음을 흡족하게 하며 내 복으로 내 백성을 만족하게 하리라 여호와의 말씀이니라
15 여호와께서 이와 같이 말씀하시니라 라마에서 슬퍼하며 통곡하는 소리가 들리니 라헬이 그 자식 때문에 애곡하는 것이라 그가 자식이 없어져서 위로 받기를 거절하는도다
16 여호와께서 이와 같이 말씀하시니라 네 울음 소리와 네 눈물을 멈추어라 네 일에 삯을 받을 것인즉 그들이 그의 대적의 땅에서 돌아오리라 여호와의 말씀이니라
17 너의 장래에 소망이 있을 것이라 너의 자녀가 자기들의 지경으로 돌아오리라 여호와의 말씀이니라
18 에브라임이 스스로 탄식함을 내가 분명히 들었노니 주께서 나를 징벌하시매 멍에에 익숙하지 못한 송아지 같은 내가 징벌을 받았나이다 주는 나의 하나님 여호와이시니 나를 이끌어 돌이키소서 그리하시면 내가 돌아오겠나이다
19 내가 돌이킨 후에 뉘우쳤고 내가 교훈을 받은 후에 내 볼기를 쳤사오니 이는 어렸을 때의 치욕을 지므로 부끄럽고 욕됨이니이다 하도다
20 에브라임은 나의 사랑하는 아들 기뻐하는 자식이 아니냐 내가 그를 책망하여 말할 때마다 깊이 생각하노라 그러므로 그를 위하여 내 창자가 들끓으니 내가 반드시 그를 불쌍히 여기리라 여호와의 말씀이니라
21 처녀 이스라엘아 너의 이정표를 세우며 너의 푯말을 만들고 큰 길 곧 네가 전에 가던 길을 마음에 두라 돌아오라 네 성읍들로 돌아오라
22 반역한 딸아 네가 어느 때까지 방황하겠느냐 여호와가 새 일을 세상에 창조하였나니 곧 여자가 남자를 둘러 싸리라
23 만군의 여호와 이스라엘의 하나님께서 이와 같이 말씀하시니라 내가 그 사로잡힌 자를 돌아오게 할 때에 그들이 유다 땅과 그 성읍들에서 다시 이 말을 쓰리니 곧 의로운 처소여, 거룩한 산이여, 여호와께서 네게 복 주시기를 원하노라 할 것이며
24 유다와 그 모든 성읍의 농부와 양 떼를 인도하는 자가 거기에 함께 살리니
25 이는 내가 그 피곤한 심령을 상쾌하게 하며 모든 연약한 심령을 만족하게 하였음이라 하시기로
26 내가 깨어 보니 내 잠이 달았더라
27 여호와의 말씀이니라 보라 내가 사람의 씨와 짐승의 씨를 이스라엘 집과 유다 집에 뿌릴 날이 이르리니
28 깨어서 그들을 뿌리 뽑으며 무너뜨리며 전복하며 멸망시키며 괴롭게 하던 것과 같이 내가 깨어서 그들을 세우며 심으리라 여호와의 말씀이니라
29 그 때에 그들이 말하기를 다시는 아버지가 신 포도를 먹었으므로 아들들의 이가 시다 하지 아니하겠고
30 신 포도를 먹는 자마다 그의 이가 신 것 같이 누구나 자기의 죄악으로 말미암아 죽으리라
31 여호와의 말씀이니라 보라 날이 이르리니 내가 이스라엘 집과 유다 집에 새 언약을 맺으리라
32 이 언약은 내가 그들의 조상들의 손을 잡고 애굽 땅에서 인도하여 내던 날에 맺은 것과 같지 아니할 것은 내가 그들의 남편이 되었어도 그들이 내 언약을 깨뜨렸음이라 여호와의 말씀이니라
33 그러나 그 날 후에 내가 이스라엘 집과 맺을 언약은 이러하니 곧 내가 나의 법을 그들의 속에 두며 그들의 마음에 기록하여 나는 그들의 하나님이 되고 그들은 내 백성이 될 것이라 여호와의 말씀이니라
34 그들이 다시는 각기 이웃과 형제를 가르쳐 이르기를 너는 여호와를 알라 하지 아니하리니 이는 작은 자로부터 큰 자까지 다 나를 알기 때문이라 내가 그들의 악행을 사하고 다시는 그 죄를 기억하지 아니하리라 여호와의 말씀이니라

[롬8:1] 그러므로 이제 그리스도 예수 안에 있는 자에게는 결코 정죄함이 없나니""", 

"""[잠24:16] 대저 의인은 일곱 번 넘어질지라도 다시 일어나려니와 악인은 재앙으로 말미암아 엎드러지느니라

[요일1:7-10]
7 그가 빛 가운데 계신 것 같이 우리도 빛 가운데 행하면 우리가 서로 사귐이 있고 그 아들 예수의 피가 우리를 모든 죄에서 깨끗하게 하실 것이요
8 만일 우리가 죄가 없다고 말하면 스스로 속이고 또 진리가 우리 속에 있지 아니할 것이요
9 만일 우리가 우리 죄를 자백하면 그는 미쁘시고 의로우사 우리 죄를 사하시며 우리를 모든 불의에서 깨끗하게 하실 것이요
10 만일 우리가 범죄하지 아니하였다 하면 하나님을 거짓말하는 이로 만드는 것이니 또한 그의 말씀이 우리 속에 있지 아니하니라

[요일2:1-2]
1 나의 자녀들아 내가 이것을 너희에게 씀은 너희로 죄를 범하지 않게 하려 함이라 만일 누가 죄를 범하여도 아버지 앞에서 우리에게 대언자가 있으니 곧 의로우신 예수 그리스도시라
2 그는 우리 죄를 위한 화목제물이니 우리만 위할 뿐 아니요 온 세상의 죄를 위하심이라"""
]

# 이미지 파일 경로 리스트
image_files = [
    r"C:\rd-project\image1.png",
    r"C:\rd-project\image2.png",
    r"C:\rd-project\image3.png",
    r"C:\rd-project\image4.png",
    r"C:\rd-project\image5.png",
    r"C:\rd-project\image6.png",
    r"C:\rd-project\image7.png",
    r"C:\rd-project\image8.png",
    r"C:\rd-project\image9.png",
    r"C:\rd-project\image10.png",
    r"C:\rd-project\image11.png"
]

message_index = 0  # 시작 메시지 인덱스

def upload_image(image_path):
    try:
        with open(image_path, 'rb') as image_file:
            files = {
                'file': (os.path.basename(image_path), image_file, 'image/png')
            }
            upload_headers = {
                'Authorization': f'Bearer {ACCESS_TOKEN}'
            }
            response = requests.post(KAKAO_UPLOAD_URL, headers=upload_headers, files=files)
            if response.status_code == 200:
                response_data = response.json()
                return response_data.get('infos', {}).get('original', {}).get('url')
            else:
                print(f"이미지 업로드 실패: {response.text}")
                return None
    except Exception as e:
        print(f"이미지 업로드 중 예외 발생: {e}")
        return None

def send_template_message(template_id, text, full_text_url, image_url):
    template_args = {
        'message': text,
        'link_text': full_text_url
    }
    if image_url:
        template_args['image_url'] = image_url

    data = {
        'template_id': template_id,
        'template_args': json.dumps(template_args)
    }

    response = requests.post(KAKAO_SEND_MESSAGE_URL, headers=headers, data=data)
    if response.status_code == 200:
        print(f"템플릿 메시지 전송 성공: {text}")
        print(f"이미지 URL: {image_url}")
    else:
        print(f"템플릿 메시지 전송 실패: {response.text}")

def job():
    global message_index
    text = messages[message_index]
    full_text = full_texts[message_index]
    full_text_url = f"https://curatube.netlify.app/rd/{message_index + 1}"
    image_path = image_files[message_index]
    image_url = upload_image(image_path)
    if image_url:
        send_template_message(TEMPLATE_ID, text, full_text_url, image_url)
    else:
        send_template_message(TEMPLATE_ID, text, full_text_url, '')
    message_index = (message_index + 1) % len(messages)

# 스케줄 설정 (오전 7시)
schedule.every().monday.at("17:29").do(job)
schedule.every().tuesday.at("07:00").do(job)
schedule.every().wednesday.at("07:00").do(job)
schedule.every().thursday.at("07:00").do(job)
schedule.every().friday.at("07:00").do(job)
schedule.every().saturday.at("07:00").do(job)

while True:
    schedule.run_pending()
    time.sleep(1)